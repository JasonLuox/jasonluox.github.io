<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="HTML,JavaScript,CSS,TypeScript,VUE,WEBPACK,VITE"/>
  <link rel="shortcut icon" href="/img/avatar/logo.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://jasonluox.github.io/en/mobile-移动端页面开发指南/">
  <title>
    
      [Mobile] 移动端开发指南 - 流年风尘 | 我的前端之路
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Jason Luo&#39;s Golden House</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/comic/about_stars3.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/scenery/sunshine.jpg');
      --intro-header-background-image-url-page: url('//img/header_img/scenery/sunshine.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/comic/about_stars3.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/scenery/sunshine.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/scenery/sunshine.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/scenery/sunshine.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/jasonluo-white.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading" style="height: 200px;">
            <div class="tags">
              
              <a class="tag" href="/tags/#h5" title="h5">h5</a>
              
              <a class="tag" href="/tags/#移动端开发" title="移动端开发">移动端开发</a>
              
            </div>
            <h1>[Mobile] 移动端开发指南</h1>
            <h2 class="subheading">H5页面开发指南</h2>
            <span class="meta">
              Posted by Jason Luo on
              2019-12-28
            </span>


<!--            
            &lt;!&ndash; WordCount start &ndash;&gt;
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">26</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">6.2k</span> In Total
            </span>
            <div class="blank_box"></div>
            &lt;!&ndash; WordCount end &ndash;&gt;
            
            
            &lt;!&ndash; 不蒜子统计 start &ndash;&gt;
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            &lt;!&ndash; 不蒜子统计 end &ndash;&gt;
            -->


          </div>
          
        </div>
      </div>
    </div>
  </div>

  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h3 id="H5简介">H5简介</h3>
<p><strong>什么是H5?</strong></p>
<p>H5全名为HTML5，HTML5是HTML的第五个版本，HTML(Hyper Text Mark-up Language)即超文本标记语言，是目前网络上应用最为广泛的语言，也是构成网页文档的主要语言。</p>
<p><strong>HTML5本质上不是什么新的技术</strong>，但是由于其在功能特性上有了极大的丰富，在加上各大浏览器性能上的支持，HTML5相对以前的HTML4有着更广泛的应用。</p>
<p><strong>H5新特性</strong></p>
<p>1 语言特性</p>
<p>HTML5赋予网页更好的意义和结构，简单地说就是程序员更方便地跟浏览器沟通。字符编码变得简洁，不区分大小写，同时添加了布尔值，类似checked,selected等，引号可以省略，有可以省略结束符的标签，和完全省略的标签。</p>
<p>2 本地储存特性</p>
<p>基于HTML5开发的网页APP拥有更短的启动时间，更快的联网速度，因可将一些常用、不常更新的内容储存在本地。</p>
<p>3 设备兼容特性</p>
<p>HTML5提供了前所未有的数据与应用接入开放接口，使外部应用可以直接与浏览器内部的数据直接相连。例如视频影音可以与microphones及摄像头相联。</p>
<p>4 连接特性</p>
<p>HTML5拥有更有效的服务器推送技术，ServerSentEvent和WebSockets就是其中的两个特性，这两个特性能够帮助实现服务器将数据“推送”到客户端的功能。更有效的连接工作效率，可以实现基于页面的实时聊天，更快速的网页游戏体验，更优化的在线交流。</p>
<p>5 CSS3特性</p>
<p>如果把网页比喻成舞台，文字图片视频这些比喻成演员，那么CSS3就是化妆师和舞美，它控制着网页所有的元素的视觉和动作效果。相对于旧的CSS版本，HTML5所支持的CSS3中提供了更多的风格和更强的效果，也提供了更高的灵活性和控制型。</p>
<h3 id="页面适配问题">页面适配问题</h3>
<h4 id="viewport">viewport</h4>
<p>传统桌面web页面布局通常是定宽布局，但是定宽布局的方式对移动端却不适用，原因手机屏幕尺寸大小各异，定宽布局可能在某些手机上出现横向滚动条，导致阅读效果比较差。</p>
<p>为了让手机有更好的网页浏览体验，苹果引入了viewport，为页面提供了一个虚拟的布局窗口，在这个虚拟的布局窗口中渲染页面，然后系统会把渲染好的页面自动缩放到手机屏幕大小。</p>
<p>虽然viewport还没有成为正式的规范，但是现在绝大部分浏览器都支持viewport。</p>
<p>在桌面浏览器中，viewport严格等于浏览器窗口大小，页面渲染时，页面宽度不会超过浏览器的宽度。</p>
<p>移动端屏幕太窄，为了提供更好的页面体验，移动端提供了两种viewport：<strong>可视viewport</strong>，<strong>布局viewport</strong>。</p>
<p><strong>可视viewport</strong>就是当前屏幕正在展示的区域，也就是移动设备屏幕的宽度，宽高通过window.innerWidth和window.innerHeight获取（存在兼容性问题）。</p>
<p><strong>布局viewport</strong>，页面布局实际用到的viewport，通常比可视viewport要宽，宽高通过document.documentElement.clientWidth和document.documentElement.clientHeight获取。</p>
<p>移动端还有一种viewport概念，可以理解为<strong>理想viewport</strong>，作用就是在理想viewport下，不同移动设备，展示的字体大小接近，并且不需要用户缩放就可以展示全部的页面内容。</p>
<p>理想viewport的宽度默认等于可视viewport的宽度，但是对同一台设备来说，这个理想viewport的宽度是可以改变的，而可视viewport的宽度是不可变的。</p>
<p>如何使用理想viewport来布局页面呢？只需要设置viewport的width等于device-width。</p>
<p>viewport的属性，推荐使用以及支持度较广泛的属性只有6个：<code>width</code>，<code>height</code>，<code>initial-scale</code>，<code>maximum-scale</code>，<code>minimum-scale</code>，<code>user-scalable</code>。</p>
<p><code>width</code> 设置viewport布局宽度，内核是webkit的浏览器默认值是980px，取值范围在200-10000px，也可以取值为设备宽度device-width（等于横向设备无关像素数量）。</p>
<p><code>height</code> 设置viewport布局高度，默认值依赖设备长宽比以及宽度值，取值范围在223-10000px，也可以取值为设备高度device-height。</p>
<p><code>initial-scale</code> 设置初始缩放比例，页面第一次加载时的缩放比例。默认比例依赖于显示密度。在密度低于200 dpi的显示设备上，比例为1.0。在密度介于200及300 dpi之间的显示设备上，比例为1.5。对于具有300 dpi以上密度的显示设备，比例为密度/150 dpi向下取整的结果。取值范围由<code>maximum-scale</code>属性以及<code>minimum-scale</code>属性决定。如果设置<code>initial-scale</code>值为1，<code>width</code>默认是device-width，<code>height</code>默认是device-height</p>
<p><code>initial-scale</code>设置的缩放大小会改变理想viewport的大小，不会改变可视viewport的大小，也不会改变布局viewport的大小，这是某些适配方案依赖的基本原理，也是解决<strong>1px问题</strong>的关键。后面分析适配方案时，动态viewport适配方案就依赖这个知识点。</p>
<p><code>maximum-scale</code> 允许用户缩放到的最大比例，默认值是0.5，范围从0到10.0。</p>
<p><code>minimum-scale</code> 允许用户缩放到的最小比例，默认值是5.0，范围从0到10.0。</p>
<p><code>user-scalable</code> 用户是否可以手动缩放，值可以是：yes/true允许用户缩放；no/false不允许用户缩放。</p>
<h4 id="适配方案">适配方案</h4>
<h5 id="方案一">方案一</h5>
<p>固定高度，宽度自适应。</p>
<p>这种方案是目前使用较多的方案，也是相对较简单的实现方案：</p>
<p>该方法使用了理想视口：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>垂直方向使用固定的值，水平方向使用弹性布局，元素采用定值、百分比、flex布局等。这种方案相对简单，还原度也非常低。</p>
<h5 id="方案二">方案二</h5>
<p>固定布局视口宽度，使用viewport进行缩放</p>
<p>如：荔枝FM、网易应用</p>
<p>荔枝的代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">if(/Android (\d+\.\d+)/<span class="selector-class">.test</span>(navigator<span class="selector-class">.userAgent</span>))&#123;</span><br><span class="line">  var version = parseFloat(RegExp.$1);</span><br><span class="line">  if(version&gt;<span class="number">2.3</span>)&#123;</span><br><span class="line">    var phoneScale = parseInt(window.screen.width)/640;</span><br><span class="line">    if(/MZ-M571C/<span class="selector-class">.test</span>(navigator<span class="selector-class">.userAgent</span>))&#123;</span><br><span class="line">      document.write(&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, minimum-scale = 0.5, maximum-scale= 0.5&quot;&gt;&#x27;);</span><br><span class="line">    &#125;else if(/M571C/<span class="selector-class">.test</span>(navigator<span class="selector-class">.userAgent</span>)&amp;&amp;/LizhiFM/<span class="selector-class">.test</span>(navigator<span class="selector-class">.userAgent</span>))&#123;</span><br><span class="line">      document.write(&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, minimum-scale = 0.5, maximum-scale= 0.5&quot;&gt;&#x27;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      document.write(&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, minimum-scale = &#x27;+ phoneScale +&#x27;, maximum-scale = &#x27;+ phoneScale +&#x27;, target-densitydpi=device-dpi&quot;&gt;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    document.write(&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, target-densitydpi=device-dpi&quot;&gt;&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">  document.write(&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, user-scalable=no, target-densitydpi=device-dpi&quot;&gt;&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>网易应用：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var win = window,</span><br><span class="line">        width = 640,</span><br><span class="line">        iw = win.innerWidth || width,</span><br><span class="line">        ow = win.outerHeight || iw,</span><br><span class="line">        sw = win.screen.width || iw,</span><br><span class="line">        saw = win.screen.availWidth || iw,</span><br><span class="line">        ih = win.innerHeight || width,</span><br><span class="line">        oh = win.outerHeight || ih,</span><br><span class="line">        ish = win.screen.height || ih,</span><br><span class="line">        sah = win.screen.availHeight || ih,</span><br><span class="line">        w = Math.min(iw, ow, sw, saw, ih, oh, ish, sah),</span><br><span class="line">        ratio = w / width,</span><br><span class="line">        dpr = win.devicePixelRatio;</span><br><span class="line">        if (ratio = Math.min(ratio, dpr), 1 &gt; ratio) &#123;</span><br><span class="line">            var ctt = &quot;,initial-scale=&quot; + ratio + &quot;,maximum-scale=&quot; + ratio,</span><br><span class="line">                metas = document.getElementsByTagName(&quot;meta&quot;);ctt += &quot;&quot;;</span><br><span class="line">            for (var i = 0, meta; i &lt; metas.length; i++) meta = metas[i], &quot;viewport&quot; == meta.name &amp;&amp; (meta.content += ctt)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>固定布局视口，宽度设置固定的值，总宽度为640px，根据屏幕宽度动态生成viewport。（设计稿应该是640px的）</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=640, minimum-scale = 0.5625, maximum-scale = 0.5625, target-densitydpi=device-dpi&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>这种方式布局如荔枝FM的网页宽度始终为640px。缩放比例scale为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var scale = window.screen.width / 640</span><br></pre></td></tr></table></figure>
<p>设计稿为640px时，正好可以1:1以px来写样式。但是1px所对应的物理像素就不一定是1了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(window<span class="selector-class">.screen</span><span class="selector-class">.width</span> * dpr) / <span class="number">640</span>   // <span class="number">1px</span>对应的物理像素</span><br></pre></td></tr></table></figure>
<h5 id="方案三">方案三</h5>
<p>根据不同屏幕动态写入font-size，以rem作为宽度单位，固定布局视口。</p>
<p>如网易新闻:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>以640px设计稿和750px的视觉稿，网易这样处理的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="built_in">document</span>.documentElement.clientWidth;   <span class="comment">// 屏幕的布局视口宽度</span></span><br><span class="line"><span class="keyword">var</span> rem = width / <span class="number">7.5</span>;                              <span class="comment">// 750px设计稿将布局视口分为7.5份</span></span><br><span class="line"><span class="keyword">var</span> rem = width / <span class="number">6.4</span>;                              <span class="comment">// 640px设计稿将布局视口分为6.4份</span></span><br></pre></td></tr></table></figure>
<p>这样不管是750px设计稿还是640px设计稿，1rem 等于设计稿上的100px。故px转换rem时：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rem &#x3D; px * 0.01;</span><br></pre></td></tr></table></figure>
<p>在750px设计稿上：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">75px 对应 <span class="number">0.</span>75rem, 距离占设计稿的<span class="number">10</span>%；</span><br><span class="line"></span><br><span class="line">在ipone6上：</span><br><span class="line">width = <span class="built_in">document</span>.documentElement.clientWidth = 375px；</span><br><span class="line">rem = 375px / <span class="number">7.5</span> = 50px;</span><br><span class="line"><span class="number">0.</span>75rem = <span class="number">37.</span>5px;   (<span class="number">37.5</span>/<span class="number">375</span>=<span class="number">10</span>%；占屏幕<span class="number">10</span>%)</span><br><span class="line">                     </span><br><span class="line">在ipone5上：</span><br><span class="line">width = <span class="built_in">document</span>.documentElement.clientWidth = 320px；</span><br><span class="line">rem = 320px / <span class="number">7.5</span> = <span class="number">42.</span>667px;</span><br><span class="line"><span class="number">0.</span>75rem = 32px; (<span class="number">32</span>/<span class="number">320</span>=<span class="number">10</span>%；占屏幕<span class="number">10</span>%)</span><br></pre></td></tr></table></figure>
<p>故对于设计稿上任何一个尺寸换成rem后，在任何屏下对应的尺寸占屏幕宽度的百分比相同。故这种布局可以百分比还原设计图。</p>
<h5 id="方案四">方案四</h5>
<p>以rem作为宽度单位，动态写入viewport和font-size进行缩放。</p>
<p>根据设置的dpr设置font-size。如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.style.fontSize = <span class="number">50</span> * dpr;</span><br><span class="line"><span class="comment">// dpr 为设置的设备像素比。（注意不是设备自身的设备像素比，而是认为设置的dpr）</span></span><br></pre></td></tr></table></figure>
<p>这种情况下，dpr = 1时，1rem = 50px;</p>
<p>dpr = 2时， 1rem = 100px;</p>
<p>当设计以iphone6为标准，出750px的设计稿时，此时dpr=2，故1rem 等于100px，将图上的尺寸转换为rem非常方便，除以100就行。代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scale             = <span class="number">1.0</span>;</span><br><span class="line"><span class="keyword">var</span> dpr             = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> isAndroid         = <span class="built_in">window</span>.navigator.appVersion.match(<span class="regexp">/android/gi</span>);</span><br><span class="line"><span class="keyword">var</span> isIPhone          = <span class="built_in">window</span>.navigator.appVersion.match(<span class="regexp">/iphone/gi</span>);</span><br><span class="line"><span class="keyword">var</span> devicePixelRatio  = <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line"><span class="comment">// 此处只简单对ios做了伸缩处理，安卓没有做伸缩处理，统一dpr = 1</span></span><br><span class="line"><span class="keyword">if</span> ( isIPhone ) &#123;</span><br><span class="line">  scale /= devicePixelRatio;</span><br><span class="line">  dpr *= devicePixelRatio;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> viewport        = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;viewport&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> content         = <span class="string">&#x27;initial-scale=&#x27;</span> + scale + <span class="string">&#x27;, maximum-scale=&#x27;</span> + scale + <span class="string">&#x27;,minimum-scale=&#x27;</span> + scale + <span class="string">&#x27;, width=device-width, user-scalable=no&#x27;</span>;</span><br><span class="line"></span><br><span class="line">viewport.setAttribute( <span class="string">&#x27;content&#x27;</span>, content );</span><br><span class="line"><span class="built_in">document</span>.documentElement.style.fontSize = <span class="number">50</span> * dpr + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"><span class="built_in">document</span>.documentElement.setAttribute(<span class="string">&#x27;data-dpr&#x27;</span>, dpr);</span><br></pre></td></tr></table></figure>
<p>对于该方案，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">假设肉眼看到的宽度（视觉宽度）：visualWidth,令dpr=<span class="number">1</span>时，其1rem对应的宽度为<span class="number">50.</span></span><br><span class="line"></span><br><span class="line">dpr = <span class="number">1</span> 时， 1rem = 50px, initial-scale=<span class="number">1</span>, 缩放为<span class="number">1</span>。</span><br><span class="line">visualWidth = <span class="number">50</span> * <span class="number">1</span> = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">dpr = <span class="number">2</span> 时， 1rem = 100px, initial-scale=<span class="number">0.5</span>, 缩放为<span class="number">0.5</span>。</span><br><span class="line">visualWidth = <span class="number">100</span> * <span class="number">0.5</span> = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">dpr = <span class="number">3</span> 时， 1rem = 150px, initial-scale=<span class="number">0.3333</span>, 缩放为<span class="number">0.3333</span>。</span><br><span class="line">visualWidth = <span class="number">150</span> * <span class="number">0.3333</span> = <span class="number">50</span>;</span><br></pre></td></tr></table></figure>
<p>所以该方案，1rem在所有屏幕上对应的肉眼距离相同，故不同屏幕下，总的rem数不同，大屏下总的rem数大于小屏下，如iphone6下，总宽度为7.5rem，iphone5下，总宽度为6.4rem。故此方案不能百分比还原设计稿，故写样式时，对于大块元素应该用百分比，flex等布局，不能直接用rem。</p>
<h5 id="方案五">方案五</h5>
<p>根据不同屏幕动态写入font-size和viewport，以rem作为宽度单位</p>
<p>将屏幕分为固定的块数10：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="built_in">document</span>.documentElement.clientWidth;   <span class="comment">// 屏幕的布局视口宽度</span></span><br><span class="line"><span class="keyword">var</span> rem = width / <span class="number">10</span>;                               <span class="comment">// 将布局视口分为10份</span></span><br></pre></td></tr></table></figure>
<p>这样在任何屏幕下，总长度都为10rem。1rem对应的值也不固定，与屏幕的布局视口宽度有关。</p>
<p>对于动态生成viewport，他们原理差不多，根据dpr来设置缩放。看看淘宝的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> devicePixelRatio = <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line"><span class="keyword">var</span> isIPhone = <span class="built_in">window</span>.navigator.appVersion.match(<span class="regexp">/iphone/gi</span>);</span><br><span class="line"><span class="keyword">var</span> dpr,scale;</span><br><span class="line"><span class="keyword">if</span> (isIPhone) &#123;</span><br><span class="line">  <span class="keyword">if</span> (devicePixelRatio &gt;=<span class="number">3</span>) &#123;</span><br><span class="line">    dpr = <span class="number">3</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (devicePixelRatio &gt;=<span class="number">2</span>) &#123;</span><br><span class="line">    dpr = <span class="number">2</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    dpr = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  dpr = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">scale = <span class="number">1</span> / dpr;</span><br></pre></td></tr></table></figure>
<p>淘宝只对iphone做了缩放处理，对于android所有dpr=1，scale=1即没有缩放处理。</p>
<p>此方案与方案三相似，只是做了viewport缩放，能百分比还原设计稿。</p>
<h4 id="适配中要解决的问题">适配中要解决的问题</h4>
<p>移动端适配最主要的是使在不同屏幕下不用缩放页面就能正常显示整个页面。以上方案都完成了这一需求。其次有几个需求：</p>
<p>1、解决高清屏下1px的问题，其实有很多hack方法，这里只讲了缩放视口。先将布局视口设置为高清屏的物理像素。这样css中1px就是1个物理像素，这样看到的线条才是真正的1px。但是此时视口宽度大于设备的宽度，就会出现滚动条。故对视口进行缩放，使视口宽度缩放到设备宽度。</p>
<p>淘宝团队在处理安卓端的缩放存在很多问题，所以dpr都做1处理，所以安卓端就没有解决1px的问题。</p>
<p>2、在大屏手机中一行看到的段落文字应该比小屏手机的多。</p>
<p>由于淘宝和网易新闻rem都是百分比，故如果用rem一行显示的文字个数应该是相同的。故对于段落文本不能用rem作为单位，应该用px处理，对于不同的dpr下设置不同的字体。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.selector</span> &#123; </span><br><span class="line">  <span class="attribute">color</span>: red; </span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-dpr=<span class="string">&quot;2&quot;</span>]</span> <span class="selector-class">.selector</span> &#123; </span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28px</span>; <span class="comment">// 14 * 2</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-dpr=<span class="string">&quot;3&quot;</span>]</span> <span class="selector-class">.selector</span> &#123; </span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">42px</span>; <span class="comment">// 14 * 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于方案四，不管什么情况下，1rem对应的视觉上的宽度都是一样的，而对应的大屏、小屏手机其视觉宽度当然不同，故字体设置为rem单位时，也能满足大屏手机一行显示的字体较多这个需求。</p>
<h4 id="五种方案对比">五种方案对比</h4>
<p>上面四种方案对设计稿还原程度是有差别的。</p>
<p>除了方案一和方案四以外，其他方案都是百分比还原设计稿，大屏下元素的尺寸就大。</p>
<p>方案一还原设计稿程度较低，这里不做说明。</p>
<p>方案二做了百分比适配，部分1px适配，没有字体适配。</p>
<p>方案三做了百分比适配，没有1px适配，有字体大小适配。</p>
<p>方案四没有做百分比适配，布局要用百分比和flex布局，做了1px的适配，并且对于段落文字直接可以用rem做单位，不需要做适配。</p>
<p>方案五做了百分比适配，有1px适配，有字体大小适配。</p>
<h3 id="开发工具">开发工具</h3>
<h4 id="微信web开发者工具">微信web开发者工具</h4>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Web_Developer_Tools.html">官方地址</a></p>
<p>1.使用自己的微信号来调试微信网页授权</p>
<p>2.调试、检验页面的 JS-SDK 相关功能与权限，模拟大部分 SDK 的输入和输出</p>
<p>3.使用基于 weinre 的移动调试功能（<strong>仅0.5.0-0.7.0版本支持</strong>），支持</p>
<p><code>&lt;a href=&quot;http://x5.tencent.com/guide?id=4000 &quot;X5 Blink 介绍&quot;&quot; target=&quot;_blank&quot;&gt;</code></p>
<p>X5 Blink内核的远程调试</p>
<p>4.利用集成的 Chrome DevTools 协助开发</p>
<h4 id="内网穿透工具">内网穿透工具</h4>
<p><a target="_blank" rel="noopener" href="https://ding-doc.dingtalk.com/doc#/kn6zg7/hb7000">官方地址</a></p>
<p>注意：鉴于很多开发者在临时体验开发时往往没有公网域名或者公网IP，本工具提供了一个公网代理服务，目的是方便开发测试。</p>
<p>本工具当前不保证多个开发者随意设置相同的子域名导致的冲突以及通道稳定性，因此正式应用、正式环境必须是真实的公网IP或者域名，正式应用上线绝对不能使用本工具。</p>
<p><strong>启动内网穿透</strong></p>
<p><strong>下载工具</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/open-dingtalk/</span>pierced.git	</span><br></pre></td></tr></table></figure>
<p><strong>启动工具</strong>，执行命令“./ding -config=./ding.cfg -subdomain=域名前缀 端口”</p>
<p>以mac为例：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> mac_64</span><br><span class="line">chmod 777 <span class="string">./ding</span></span><br><span class="line"><span class="string">./ding</span> -config=<span class="string">./ding.cfg</span> -subdomain=canway 8080</span><br></pre></td></tr></table></figure>
<p>以windows为例：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd windows_64</span><br><span class="line"><span class="keyword">ding.exe </span>-<span class="built_in">config</span>=<span class="keyword">ding.cfg </span>-<span class="keyword">subdomain=canway </span><span class="number">8080</span></span><br></pre></td></tr></table></figure>
<p>启动完客户端后，你访问<code>http://canway.vaiwan.com/xxxxx</code>都会映射到<code>http://127.0.0.1:8080/xxxxx</code>。</p>
<h4 id="UI组件">UI组件</h4>
<p><a target="_blank" rel="noopener" href="https://weui.io/">WeUI</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Tencent/weui/blob/master/README_cn.md">微信WeUI github</a></p>
<p><a target="_blank" rel="noopener" href="https://weui.io/work/">WeUI for Work</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/QMUI/weui">企业微信WeUI for Work github</a></p>
<h3 id="插件">插件</h3>
<h4 id="fastclick">fastclick</h4>
<p><strong>简介</strong></p>
<p>移动端项目中，在某些机型某些浏览器下，存在click事件300ms延迟的问题，影响用户满意度。原因是：从点击屏幕上的元素到触发元素的 click 事件，移动浏览器会有大约 300 毫秒的等待时间，因为它想看看你是不是要进行双击（double tap）操作。</p>
<p>vue项目中，可以通过引入fastclick第三方依赖包来解决。</p>
<p><strong>安装</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm  install <span class="comment">--save fastclick</span></span><br></pre></td></tr></table></figure>
<p><strong>使用： 在main.js中</strong></p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fastclick <span class="keyword">from</span> <span class="string">&#x27;fastclick&#x27;</span></span><br><span class="line">fastclick.attach(<span class="built_in">document</span>.body)</span><br></pre></td></tr></table></figure>
<h4 id="better-scroll">better-scroll</h4>
<p><a target="_blank" rel="noopener" href="https://better-scroll.github.io/docs/zh-CN/plugins/">官方文档</a></p>
<p><strong>简介</strong></p>
<p>better-scroll 是一个移动端滚动的解决方案，它是基于 iscroll 的重写，它和 iscroll 的主要区别在<a href="https://link.zhihu.com/?target=https%3A//github.com/ustbhuangyi/better-scroll/issues/36">这里</a>。better-scroll 也很强大，不仅可以做普通的滚动列表，还可以做轮播图、picker 等等。</p>
<p><strong>安装</strong></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span><span class="keyword">better-scroll </span>-S <span class="comment"># install 1.x</span></span><br><span class="line">npm <span class="keyword">install </span><span class="keyword">better-scroll@next </span>-S <span class="comment"># install 2.x，该版本带有所有插件的能力。</span></span><br></pre></td></tr></table></figure>
<p><strong>起步</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>wrapper元素上要给定位</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码中 BetterScroll 是作用在外层 wrapper 容器上的，滚动的部分是 content 元素。这里要注意的是，<font color=red>BetterScroll 只处理容器（wrapper）的第一个子元素（content）的滚动，其它的元素都会被忽略。</font></p>
<p><font color=red>wrapper里面不能存在多个同级div</font></p>
<p>如果这样写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;classifyTitle&quot;</span>  <span class="attr">ref</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">	ss</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in classifyData.products&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;详情&#x27;&#125;&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>那么ul中的元素将不能滚动</p>
<p><strong>scroll组件化</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div ref&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">        &lt;slot&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import BScroll from &#39;better-scroll&#39;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        props: &#123;</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 1 滚动的时候会派发scroll事件，会截流。</span><br><span class="line">             * 2 滚动的时候实时派发scroll事件，不会截流。</span><br><span class="line">             * 3 除了实时派发scroll事件，在swipe的情况下仍然能实时派发scroll事件</span><br><span class="line">             *&#x2F;</span><br><span class="line">            probeType: &#123;</span><br><span class="line">                type: Number,</span><br><span class="line">                default: 1</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 点击列表是否派发click事件</span><br><span class="line">             *&#x2F;</span><br><span class="line">            click: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: true</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 是否开启横向滚动</span><br><span class="line">             *&#x2F;</span><br><span class="line">            scrollX: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 是否派发滚动事件</span><br><span class="line">             *&#x2F;</span><br><span class="line">            listenScroll: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 列表的数据</span><br><span class="line">             *&#x2F;</span><br><span class="line">            data: &#123;</span><br><span class="line">                type: Array,</span><br><span class="line">                default: null</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 是否派发滚动到底部的事件，用于上拉加载</span><br><span class="line">             *&#x2F;</span><br><span class="line">            pullup: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 是否派发顶部下拉的事件，用于下拉刷新</span><br><span class="line">             *&#x2F;</span><br><span class="line">            pulldown: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 是否派发列表滚动开始的事件</span><br><span class="line">             *&#x2F;</span><br><span class="line">            beforeScroll: &#123;</span><br><span class="line">                type: Boolean,</span><br><span class="line">                default: false</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * 当数据更新后，刷新scroll的延时。</span><br><span class="line">             *&#x2F;</span><br><span class="line">            refreshDelay: &#123;</span><br><span class="line">                type: Number,</span><br><span class="line">                default: 20</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            &#x2F;&#x2F; 保证在DOM渲染完毕后初始化better-scroll</span><br><span class="line">            setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">                this._initScroll()</span><br><span class="line">            &#125;, 20)</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            _initScroll() &#123;</span><br><span class="line">                if (!this.$refs.wrapper) &#123;</span><br><span class="line">                    return</span><br><span class="line">                &#125;</span><br><span class="line">                &#x2F;&#x2F; better-scroll的初始化</span><br><span class="line">                this.scroll &#x3D; new BScroll(this.$refs.wrapper, &#123;</span><br><span class="line">                    probeType: this.probeType,</span><br><span class="line">                    click: this.click,</span><br><span class="line">                    scrollX: this.scrollX</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 是否派发滚动事件</span><br><span class="line">                if (this.listenScroll) &#123;</span><br><span class="line">                    this.scroll.on(&#39;scroll&#39;, (pos) &#x3D;&gt; &#123;</span><br><span class="line">                        this.$emit(&#39;scroll&#39;, pos)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 是否派发滚动到底部事件，用于上拉加载</span><br><span class="line">                if (this.pullup) &#123;</span><br><span class="line">                    this.scroll.on(&#39;scrollEnd&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">                        &#x2F;&#x2F; 滚动到底部</span><br><span class="line">                        if (this.scroll.y &lt;&#x3D; (this.scroll.maxScrollY + 50)) &#123;</span><br><span class="line">                            this.$emit(&#39;scrollToEnd&#39;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 是否派发顶部下拉事件，用于下拉刷新</span><br><span class="line">                if (this.pulldown) &#123;</span><br><span class="line">                    this.scroll.on(&#39;touchEnd&#39;, (pos) &#x3D;&gt; &#123;</span><br><span class="line">                        &#x2F;&#x2F; 下拉动作</span><br><span class="line">                        if (pos.y &gt; 50) &#123;</span><br><span class="line">                            this.$emit(&#39;pulldown&#39;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 是否派发列表滚动开始的事件</span><br><span class="line">                if (this.beforeScroll) &#123;</span><br><span class="line">                    this.scroll.on(&#39;beforeScrollStart&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">                        this.$emit(&#39;beforeScroll&#39;)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            disable() &#123;</span><br><span class="line">                &#x2F;&#x2F; 代理better-scroll的disable方法</span><br><span class="line">                this.scroll &amp;&amp; this.scroll.disable()</span><br><span class="line">            &#125;,</span><br><span class="line">            enable() &#123;</span><br><span class="line">                &#x2F;&#x2F; 代理better-scroll的enable方法</span><br><span class="line">                this.scroll &amp;&amp; this.scroll.enable()</span><br><span class="line">            &#125;,</span><br><span class="line">            refresh() &#123;</span><br><span class="line">                &#x2F;&#x2F; 代理better-scroll的refresh方法</span><br><span class="line">                this.scroll &amp;&amp; this.scroll.refresh()</span><br><span class="line">            &#125;,</span><br><span class="line">            scrollTo() &#123;</span><br><span class="line">                &#x2F;&#x2F; 代理better-scroll的scrollTo方法</span><br><span class="line">                this.scroll &amp;&amp; this.scroll.scrollTo.apply(this.scroll, arguments)</span><br><span class="line">            &#125;,</span><br><span class="line">            scrollToElement() &#123;</span><br><span class="line">                &#x2F;&#x2F; 代理better-scroll的scrollToElement方法</span><br><span class="line">                this.scroll &amp;&amp; this.scroll.scrollToElement.apply(this.scroll, arguments)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            &#x2F;&#x2F; 监听数据的变化，延时refreshDelay时间后调用refresh方法重新计算，保证滚动效果正常</span><br><span class="line">            data() &#123;</span><br><span class="line">                setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">                    this.refresh()</span><br><span class="line">                &#125;, this.refreshDelay)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">	</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">	.wrapper &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 0;</span><br><span class="line">        top: 0;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="vue-touch">vue-touch</h4>
<p><strong>简介</strong></p>
<p>vue-touch封装了 <a target="_blank" rel="noopener" href="http://hammerjs.github.io/getting-started/">hammer.js</a>的方法，用于处理移动端滑动事件</p>
<p><strong>安装vue-touch:</strong></p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install vue-touch@next</span><br></pre></td></tr></table></figure>
<p><strong>在main.js中将其注册为全局组件：</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> VueTouch = <span class="keyword">require</span>(<span class="string">&#x27;vue-touch&#x27;</span>)</span><br><span class="line">Vue.<span class="keyword">use</span>(VueTouch, &#123;name: <span class="string">&#x27;v-touch&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>使用实例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 左划 默认渲染为div   data为参数 --&gt;</span><br><span class="line">&lt;v-touch v-on:swipeleft&#x3D;&quot;onSwipeLeft(data)&quot;&gt;Swipe me!&lt;&#x2F;v-touch&gt;</span><br><span class="line">&lt;!-- 点击   渲染为一个a标签 --&gt;</span><br><span class="line">&lt;v-touch tag&#x3D;&quot;a&quot;  v-on:tap&#x3D;&quot;onTap&quot;&gt;Tap me!&lt;&#x2F;v-touch&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">	点击   渲染为p标签</span><br><span class="line">	常用的事件有：swiper(滑动事件)、tap(短时间内的点击事件)、press(事件大于tap的按压事件)</span><br><span class="line">--&gt;</span><br><span class="line">&lt;v-touch tag&#x3D;&quot;p&quot; v-on:tap&#x3D;&quot;onTap&quot;&gt;Tap me!&lt;&#x2F;v-touch&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>Api及相关事件</strong></p>
<p>1、pan，触屏中的拖动事件，在指定的dom区域内，一个手指放下并移动事件</p>
<p>事件类型有：pan, panstart, panmove, panend, pancancel,<br>
panleft, panright, panup, pandown;<br>
使用方法为：v-on:panstart=“callback”;</p>
<p>2、Swipe：滑动事件，在指定的dom区域内，一个手指快速的在触屏上滑动。</p>
<p>事件类型有：swipe, swipeleft, swiperight,</p>
<p>swipeup, swipedown</p>
<p>使用方法为：v-on:swipeleft=“callback”;</p>
<p>3、Tap :在指定的dom区域内，一个手指轻拍或点击时触发该事件(类似PC端的click)。该事件最大点击时间为250毫秒，如果超过250毫秒则按Press事件进行处理。</p>
<p>事件类型：tap</p>
<p>使用方法：v-on:tap=“callback”</p>
<p>4、Press: 在指定的dom区域内触屏版本的点击事件，这个事件相当于PC端的Click事件，该不能包含任何的移动，最小按压时间为500毫秒，常用于我们在手机上用的“复制、粘贴”等功能。该事件分别对以下事件进行监听并处理：</p>
<p>事件类型：press, pressup</p>
<p>使用方法：v-on:press = “callback”</p>
<p>5、Rotate事件：在指定的dom区域内，当两个手指或更多手指成圆型旋转时触发（就像两个手指拧螺丝一样）。该事件分别对以下事件进行监听并处理</p>
<p>事件类型：rotate, rotatestart, rotatemove,</p>
<p>rotateend, rotatecancel,</p>
<p>使用方法：v-on:rotate = “callback”</p>
<p>6、Pinch：在指定的dom区域内，两个手指（默认为两个手指，多指触控需要单独设置）或多个手指相对（越来越近）移动或相向（越来越远）移动时事件。该事件事以分别对以下事件进行监听并处理：</p>
<p>Pinchstart：多点触控开始、Pinchmove：多点触控过程、Pinchend：多点触控结束、Pinchcancel：多点触控取消、Pinchin：多点触控时两手指距离越来越近、Pinchout：多点触控时两手指距离越来越远</p>
<p>注意:vue-touch 使用的是2.0.0版本 需要与vue2.0.0兼容；</p>
<p><strong>应用实例：</strong></p>
<p>通过手势滑动，进行页面的切换，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">swiperleft: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.$router.push(&#123;<span class="string">&#x27;path&#x27;</span>:<span class="string">&#x27;/queuehistory&#x27;</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="vConsole">vConsole</h4>
<p><strong>简介</strong></p>
<p>一个轻量、可拓展、针对手机网页的前端开发者调试面板。</p>
<p>移动端项目，由于在移动端无法打开控制台，所以无法像pc端chrome控制台那样直观查看console信息；不过我们可以使用vConsole插件进行调试。</p>
<p><strong>安装vConsole:</strong></p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vconsole --<span class="built_in">save</span>-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
<p><strong>在main.js中引用并实例化：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VConsole <span class="keyword">from</span> <span class="string">&#x27;vconsole&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> vConsole = <span class="keyword">new</span> VConsole();  <span class="comment">// 不使用的时候，可以将这句屏蔽掉；</span></span><br></pre></td></tr></table></figure>
<p>此时可以使用console.log<br>
原理：改写了console.log,重写了实现，用vConsole代理</p>
<h3 id="清理微信浏览器缓存">清理微信浏览器缓存</h3>
<p>在微信中打开以下网址，找到清理缓存栏清理即可</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debugx5<span class="selector-class">.qq</span>.com</span><br></pre></td></tr></table></figure>
<h3 id="IOS页面自动缩放问题">IOS页面自动缩放问题</h3>
<p>在<code>templates/index.html</code>中添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="项目打包">项目打包</h3>
<p>如何把web端和移动端同时在一个项目中，打包成多个页面？</p>
<ol>
<li>新建文件夹src-mobile，将移动端代码全部再src-mobile中实现</li>
<li>修改打包配置文件build/</li>
</ol>
<h3 id="参考">参考</h3>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3b45aa981e77">移动端页面适配————多方案解析</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2e20f868f385">移动端H5页面适配问题研究</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b80f4e36fb9a019ce148fe9#heading-15">干货分享：vue2.0做移动端开发用到的相关插件和经验总结</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html">微信官方文档</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/27407024">当better-scroll遇见Vue</a></p>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/en/Html5-HTML5 Web Audio API与js交互增加声音/" data-toggle="tooltip" data-placement="top" title="[HTML5] HTML5 Web Audio API与js交互增加声音">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/en/css-css实现抖动特效/" data-toggle="tooltip" data-placement="top" title="[CSS] css实现抖动特效">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: 'be77013e3cb3cb9e89f1',
      clientSecret: '39e9b02a8070f1366c5e87418220c8f375864ab8',
      repo: 'jasonluox',
      owner: 'JasonLuox',
      admin: 'JasonLuox',
      id: 'Sat Dec 28 2019 09:15:26 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#H5%E7%AE%80%E4%BB%8B"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">H5简介</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%A1%B5%E9%9D%A2%E9%80%82%E9%85%8D%E9%97%AE%E9%A2%98"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">页面适配问题</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#viewport"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">viewport</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">适配方案</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">方案一</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">方案二</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89"><span class="toc-nav-number">2.2.3.</span> <span class="toc-nav-text">方案三</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%96%B9%E6%A1%88%E5%9B%9B"><span class="toc-nav-number">2.2.4.</span> <span class="toc-nav-text">方案四</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%96%B9%E6%A1%88%E4%BA%94"><span class="toc-nav-number">2.2.5.</span> <span class="toc-nav-text">方案五</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%80%82%E9%85%8D%E4%B8%AD%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">适配中要解决的问题</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%BA%94%E7%A7%8D%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">五种方案对比</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">开发工具</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%BE%AE%E4%BF%A1web%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">微信web开发者工具</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">内网穿透工具</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#UI%E7%BB%84%E4%BB%B6"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">UI组件</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">插件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#fastclick"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">fastclick</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#better-scroll"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">better-scroll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#vue-touch"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">vue-touch</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#vConsole"><span class="toc-nav-number">4.4.</span> <span class="toc-nav-text">vConsole</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B8%85%E7%90%86%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">清理微信浏览器缓存</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#IOS%E9%A1%B5%E9%9D%A2%E8%87%AA%E5%8A%A8%E7%BC%A9%E6%94%BE%E9%97%AE%E9%A2%98"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">IOS页面自动缩放问题</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">项目打包</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">参考</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#h5" title="h5">h5</a>
            
            <a class="tag" href="/tags/#移动端开发" title="移动端开发">移动端开发</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Jason Luo
          2021
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='我要变强，为此不惜一切...,一念往，尽作尘泥罢...,玻璃晴朗，橘子辉煌...,我心即地狱，管他罪孽滔天...,我要这天，再遮不住我眼...,我要这地，再埋不了我心...,斯若晴空，何惧冰寒...,这灯红酒绿的世界啊...,不要放弃，哪怕付出所有...' color='#CDF0EA,#F9F9F9,#F7DBF0,#BEAEE2,#F38181,#FCE38A,#EAFFD0,#95E1D3,#80D6FF'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://jasonluox.github.io/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"mobile":{"show":"fasle"},"display":{"hOffset":-40,"vOffset":-80},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
